import React, { useRef, useEffect, useState } from 'react';
import {Link} from "react-router-dom";
import { motion } from "framer-motion";
import { useInView } from 'react-intersection-observer';

const VideoSection = () => {
  const [ref1, inView1] = useInView({ triggerOnce: true });
  const videoEl = useRef(null);

  const handlePlayPause = (entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        videoEl.current.play().catch((error) => {
          console.error("Error attempting to play", error);
        });
      } else {
        videoEl.current.pause();
      }
    });
  };

  useEffect(() => {
    const observer = new IntersectionObserver(handlePlayPause, {
      threshold: 0.5, // Adjust this threshold as needed
    });

    const currentVideoEl = videoEl.current; // Store the current value in a variable

    if (currentVideoEl) {
      observer.observe(currentVideoEl);
    }

    return () => {
      if (currentVideoEl) {  // Use the stored variable in the cleanup function
        observer.unobserve(currentVideoEl);
      }
    };
  }, []);


  return (
    <motion.div className="video-container"
    ref={ref1}
              initial={{
                opacity: 0,
                y: 40, // Move slightly down initially
              }}
              animate={{
                opacity: inView1 ? 1 : 0,
                y: inView1 ? 0 : 40,
              }}
              transition={{ duration: 0.6, ease: 'easeOut' }}
    >
      <div className="video-content">
      <div className="video-extension">
            <h1>Online<span>Shopping</span>Like A Pro</h1>
            <a href="https://apps.apple.com/us/app/ollacart/id6476688090" target="_blank" >
<div className="btn mobile-btn">
                  <svg width="35" height="35" viewBox="0 0 35 35" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clipPath="url(#clip0_247_671)">
<path d="M30.0706 22.9084C29.9909 22.7263 29.8622 22.57 29.6987 22.4569C27.4449 20.9083 26.9761 18.2666 26.9761 16.3223C26.9761 13.9755 28.765 11.9315 29.8315 10.9208C29.9364 10.8215 30.02 10.7019 30.0771 10.5692C30.1342 10.4365 30.1636 10.2936 30.1636 10.1491C30.1636 10.0047 30.1342 9.86178 30.0771 9.72911C30.02 9.59643 29.9364 9.4768 29.8315 9.3775C28.1475 7.78774 25.3584 6.75977 22.7261 6.75977C20.8351 6.76122 18.9868 7.32172 17.4136 8.37078C15.5783 7.14009 13.3715 6.58738 11.1727 6.80771C8.974 7.02805 6.92076 8.00765 5.36614 9.57805C4.43677 10.5268 3.70756 11.6527 3.22182 12.8889C2.73609 14.125 2.50373 15.4461 2.53857 16.7738C2.59115 19.0148 3.08965 21.2227 4.00498 23.2689C4.9203 25.315 6.2341 27.1583 7.86966 28.6911C8.85486 29.6219 10.16 30.1387 11.5154 30.1348H23.1604C23.885 30.1361 24.6021 29.9887 25.2674 29.7015C25.9327 29.4143 26.5319 28.9936 27.0279 28.4653C27.9467 27.4765 28.7414 26.3794 29.3946 25.1981C30.3269 23.4941 30.2074 23.2285 30.0706 22.9084ZM25.4713 27.0177C25.1747 27.3326 24.8165 27.5832 24.4189 27.7539C24.0214 27.9245 23.593 28.0116 23.1604 28.0098H11.5154C10.7036 28.0124 9.92185 27.7028 9.33193 27.1452C7.9003 25.8048 6.75012 24.1926 5.94857 22.4028C5.14703 20.6129 4.71018 18.6813 4.66357 16.7207C4.63451 15.679 4.81531 14.6421 5.19521 13.6717C5.5751 12.7013 6.14633 11.8173 6.87489 11.0722C7.55558 10.3768 8.36879 9.8249 9.26644 9.44919C10.1641 9.07348 11.128 8.88155 12.1011 8.88477H12.2047C13.8598 8.9022 15.4609 9.47675 16.7495 10.5157C16.938 10.6666 17.1722 10.7488 17.4136 10.7488C17.655 10.7488 17.8892 10.6666 18.0776 10.5157C19.3939 9.45448 21.0353 8.87858 22.7261 8.88477C24.4145 8.90437 26.0663 9.37927 27.5073 10.2594C25.7808 12.1878 24.8511 14.3062 24.8511 16.3223C24.8511 19.4792 25.8658 21.9973 27.7968 23.6668C27.1887 24.8909 26.4053 26.0197 25.4713 27.0177ZM17.4441 4.36914C17.7388 3.2279 18.4046 2.21705 19.3368 1.49573C20.269 0.774415 21.4146 0.383585 22.5933 0.384768H22.7261C23.0079 0.384768 23.2781 0.49671 23.4774 0.695967C23.6766 0.895225 23.7886 1.16548 23.7886 1.44727C23.7886 1.72906 23.6766 1.99931 23.4774 2.19857C23.2781 2.39783 23.0079 2.50977 22.7261 2.50977H22.5933C21.8865 2.50971 21.1999 2.7445 20.6411 3.17724C20.0824 3.60998 19.6834 4.21613 19.5067 4.90039C19.4362 5.17338 19.2602 5.4072 19.0174 5.55042C18.7745 5.69363 18.4848 5.73451 18.2118 5.66407C17.9388 5.59362 17.705 5.41761 17.5617 5.17477C17.4185 4.93192 17.3776 4.64213 17.4481 4.36914H17.4441Z" fill="white"/>
</g>
<defs>
<clipPath id="clip0_247_671">
<rect width="34" height="34" fill="white" transform="translate(0.414062 0.384766)"/>
</clipPath>
</defs>
</svg>

                    <p>Download on App Store</p>
                  </div>
</a>
                  <a href="https://chromewebstore.google.com/detail/ollacart-extension/hpbmlmabfkbhmhjhocddfckebbnbkcbm" target="_blank" >
                  <button>
            <svg width="41" height="41" viewBox="0 0 41 41" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M36.7691 25.3675C36.7691 27.593 35.0766 29.2225 32.8042 29.2225C30.5322 29.2225 28.8398 27.593 28.8398 25.3675C28.8398 23.1427 30.5322 21.5127 32.8042 21.5127C35.0766 21.5129 36.7691 23.1427 36.7691 25.3675ZM30.4692 25.3675C30.4692 26.7936 31.4253 27.7183 32.8041 27.7183C34.183 27.7183 35.1389 26.7936 35.1389 25.3675C35.1389 23.9418 34.183 23.0172 32.8041 23.0172C31.4253 23.0172 30.4692 23.9418 30.4692 25.3675Z" fill="#2B2D42"/>
<path d="M18.3661 25.9894C18.1252 27.0519 17.2655 27.7121 16.1017 27.7121C14.7228 27.7121 13.7669 26.7874 13.7669 25.3613C13.7669 24.5433 14.0827 23.8916 14.6111 23.4832L14.0641 22.163L14.2564 22.6272L14.013 22.04C12.8675 22.6946 12.1367 23.8994 12.1367 25.3613C12.1367 27.5866 13.8292 29.2163 16.1016 29.2163C18.1541 29.2163 19.7328 27.8864 20.0189 25.9894H19.8111H18.3661Z" fill="#009FB7"/>
<path d="M34.1088 20.299C33.9987 20.299 33.8865 20.2751 33.7804 20.2244C33.3991 20.0427 33.2372 19.5865 33.4188 19.2049C33.9754 18.0366 34.4438 16.7594 34.551 16.1577C33.3124 16.0104 29.3432 16.1019 25.799 16.2962C25.3785 16.3191 25.0165 15.9962 24.9933 15.5743C24.9704 15.1524 25.2937 14.7918 25.7154 14.7687C25.7371 14.7674 27.9179 14.6483 30.166 14.5894C34.9182 14.4644 35.3265 14.7146 35.5966 14.8801C36.3699 15.354 36.1608 16.4476 35.6087 17.9438C35.2496 18.9171 34.8179 19.8251 34.7997 19.8632C34.6687 20.1382 34.3946 20.299 34.1088 20.299Z" fill="white"/>
<path d="M26.6073 24.4585H17.0313C16.8322 24.4585 16.6247 24.351 16.5703 24.2202C16.5702 24.2193 16.5695 24.2185 16.5691 24.2177L12.1717 13.6268L12.1711 13.6271L11.8364 12.8215C11.7253 12.5534 11.397 12.334 11.1066 12.334H10.6906H10.0408H5.7375C5.31516 12.334 4.97266 12.6765 4.97266 13.099C4.97266 13.5215 5.315 13.8638 5.7375 13.8638H10.0408H10.0856C10.3744 13.8638 10.7011 14.0813 10.8138 14.3479L15.0539 24.5559C15.0553 24.5593 15.0562 24.5626 15.0575 24.5662L15.4055 25.4035C15.5388 25.7252 15.933 25.988 16.2812 25.988H16.7598C16.7613 25.988 16.7627 25.9879 16.7638 25.9879L26.607 25.988C27.0294 25.988 27.372 25.6457 27.372 25.223C27.3722 24.8009 27.0297 24.4585 26.6073 24.4585Z" fill="#FE4A49"/>
</svg>
              <p>Add Chrome Extenstion</p>
            </button>
                  </a>

          </div>
        <div className="video-text">
          <p>Below is the demo of OllaCart, with which you can quickly add items to OllaCart from any website.</p>
        </div>
      </div>

      <div className="video">
          
      <video
        controls
        playsInline
        loop
        muted
        alt="All the devices"
        src="/extension-video.mp4"
        ref={videoEl}
      />
        </div>
        <div className="video mobile-video">
        <video
        controls
        playsInline
        loop
        muted
        alt="All the devices"
        src="/video-extension-mobile.mp4"
        ref={videoEl}
      />
        </div>

    </motion.div>
  );
};

export default VideoSection;
