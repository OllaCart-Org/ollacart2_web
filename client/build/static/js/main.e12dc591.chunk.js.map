{"version":3,"sources":["core/Copyright.js","config.js","auth/index.js","core/cartHelpers.js","core/Menu.js","core/Layout.js","user/Signup.js","user/Signin.js","core/apiCore.js","core/ShowImage.js","core/Card.js","core/Search.js","core/Home.js","auth/PrivateRoute.js","user/UserDashboard.js","user/apiUser.js","auth/AdminRoute.js","user/AdminDashboard.js","admin/apiAdmin.js","admin/AddCategory.js","admin/AddProduct.js","core/Shop.js","core/Product.js","core/Checkout.js","core/Cart.js","admin/Orders.js","user/Profile.js","admin/ManageProducts.js","admin/UpdateProduct.js","core/NotFound.js","core/MainLayout.js","core/Main.js","Routes.js","index.js"],"names":["Copyright","Box","mt","mb","Typography","variant","color","align","Link","href","Date","getFullYear","API","signout","next","window","localStorage","removeItem","fetch","method","then","response","console","log","catch","err","isAuthenticated","getItem","JSON","parse","itemTotal","length","isActive","history","path","location","pathname","textDecoration","useStyles","makeStyles","theme","grow","flexGrow","menuButton","marginRight","spacing","title","breakpoints","up","display","search","position","borderRadius","shape","backgroundColor","fade","palette","common","white","marginLeft","width","searchIcon","padding","height","pointerEvents","alignItems","justifyContent","inputRoot","inputInput","paddingLeft","transition","transitions","create","sectionDesktop","sectionMobile","withRouter","classes","React","useState","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","isMenuOpen","Boolean","isMobileMenuOpen","handleMobileMenuClose","handleMenuClose","renderMenu","Menu","anchorOrigin","vertical","horizontal","id","keepMounted","transformOrigin","open","onClose","MenuItem","onClick","renderMobileMenu","style","to","IconButton","aria-label","Badge","badgeContent","user","role","cursor","push","className","AppBar","Toolbar","edge","noWrap","aria-controls","aria-haspopup","event","currentTarget","Layout","description","children","paper","marginTop","flexDirection","avatar","margin","secondary","main","form","submit","Signup","name","email","password","error","success","values","setValues","handleChange","target","value","clickSubmit","preventDefault","headers","Accept","body","stringify","json","data","Container","component","maxWidth","CssBaseline","Avatar","noValidate","Grid","container","item","xs","TextField","autoComplete","onChange","type","required","fullWidth","label","autoFocus","Button","justify","signUpForm","Signin","loading","redirectToReferrer","signin","setItem","authenticate","FormControlLabel","control","signInForm","getProducts","sortBy","getCategories","getFilteredProducts","skip","limit","filters","ShowImage","url","src","photo","alt","objectFit","icon","heroContent","background","heroButtons","cardGrid","paddingTop","paddingBottom","card","cardMedia","cardContent","productDescription","footer","Card","product","shopItemClicked","showViewProductButton","showAddToCartButton","cartUpdate","showRemoveProductButton","setRun","run","redirect","count","shouldRedirect","price","class","AddShoppingCart","e","stopPropagation","formControl","minWidth","selectEmpty","tField","root","Search","categories","category","results","searched","setData","useEffect","searchData","params","query","queryString","list","undefined","searchSubmit","searchMessage","onSubmit","FormControl","InputLabel","Select","labelId","displayEmpty","map","c","i","key","_id","border","ml","searchedProducts","Home","productsBySell","setProductsBySell","productsByArrival","setProductsByArrival","setError","PrivateRoute","Component","rest","render","props","state","from","Dashboard","setHistory","token","init","userId","Authorization","getPurchaseHistory","h","products","p","moment","createdAt","fromNow","purchaseHistory","AdminRoute","AdminDashboard","AddCategory","setName","setSuccess","createCategory","showSuccess","showError","AddProduct","shipping","quantity","createdProduct","redirectToProfile","formData","FormData","files","set","createProduct","accept","Shop","myFilters","setCategories","setSkip","size","setSize","filteredResults","setFilteredResults","loadFilteredResults","newFilters","loadMore","toSkip","btn","boxShadow","Product","setProduct","relatedProduct","setRelatedProduct","loadSingleProduct","productId","read","listRelated","match","substring","Checkout","f","clientToken","instance","address","getToken","getBraintreeClientToken","handleAddress","getTotal","reduce","currentValue","nextValue","deliveryAddress","buy","requestPaymentMethod","paymentData","paymentMethodNonce","nonce","amount","processPayment","createOrderData","transaction_id","transaction","order","createOrder","message","showDropIn","onBlur","placeholder","options","authorization","paypal","flow","onInstance","Cart","items","setItems","showItems","Orders","orders","setOrders","statusValues","setStatusValues","loadOrders","listOrders","loadStatusValues","getStatusValues","showInput","readOnly","handleStatusChange","orderId","status","updateOrderStatus","o","oIndex","borderBottom","index","showStatus","pIndex","Profile","update","alert","auth","updateUser","profileUpdate","redirectUser","ManageProducts","setProducts","loadProducts","destroy","deleteProduct","UpdateProduct","getProduct","initCategories","updateProduct","NotFound","gutterBottom","fontSize","MainLayout","cartSelected","cartToggle","groupMode","setGrupMode","Group","Person","Share","Settings","LocalShipping","AddToHomeScreen","Main","setCartSelected","setPrice","Math","random","selected","randomizeSelect","updateFilterResults","filter","itm","idx","Routes","exact","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.e12dc591.chunk.js","sourcesContent":["import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Link from '@material-ui/core/Link';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nexport default function Copyright() {\r\n  return (\r\n    <Box mt={8} mb={4}>\r\n      <Typography variant='body2' color='textSecondary' align='center'>\r\n        {'Copyright © '}\r\n        <Link color='inherit' href='#'>\r\n          Ashraf Kabir\r\n        </Link>{' '}\r\n        {new Date().getFullYear()}\r\n        {'.'}\r\n      </Typography>\r\n    </Box>\r\n  );\r\n}\r\n","// export const API = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\nexport const API = 'https://ollacart.herokuapp.com/api';\r\n","import { API } from '../config';\r\n\r\nexport const signup = (user) => {\r\n  // console.log(name, email, password);\r\n  return fetch(`${API}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(user),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const signin = (user) => {\r\n  // console.log(name, email, password);\r\n  return fetch(`${API}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(user),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const authenticate = (data, next) => {\r\n  if (typeof window !== 'undefined') {\r\n    localStorage.setItem('jwt', JSON.stringify(data));\r\n    next();\r\n  }\r\n};\r\n\r\nexport const signout = (next) => {\r\n  if (typeof window !== 'undefined') {\r\n    localStorage.removeItem('jwt');\r\n    next();\r\n    return fetch(`${API}/signout`, {\r\n      method: 'GET',\r\n    })\r\n      .then((response) => {\r\n        console.log('signout', response);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n};\r\n\r\nexport const isAuthenticated = () => {\r\n  if (typeof window === 'undefined') {\r\n    return false;\r\n  }\r\n  if (localStorage.getItem('jwt')) {\r\n    return JSON.parse(localStorage.getItem('jwt'));\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n","export const addItem = (item = [], count = 0, next = (f) => f) => {\r\n  let cart = [];\r\n  if (typeof window !== 'undefined') {\r\n    if (localStorage.getItem('cart')) {\r\n      cart = JSON.parse(localStorage.getItem('cart'));\r\n    }\r\n    cart.push({\r\n      ...item,\r\n      count: 1,\r\n    });\r\n\r\n    // remove duplicates\r\n    // build an Array from new Set and turn it back into array using Array.from\r\n    // so that later we can re-map it\r\n    // new set will only allow unique values in it\r\n    // so pass the ids of each object/product\r\n    // If the loop tries to add the same value again, it'll get ignored\r\n    // ...with the array of ids we got on when first map() was used\r\n    // run map() on it again and return the actual product from the cart\r\n\r\n    cart = Array.from(new Set(cart.map((p) => p._id))).map((id) => {\r\n      return cart.find((p) => p._id === id);\r\n    });\r\n\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n    next();\r\n  }\r\n};\r\n\r\nexport const itemTotal = () => {\r\n  if (typeof window !== 'undefined') {\r\n    if (localStorage.getItem('cart')) {\r\n      return JSON.parse(localStorage.getItem('cart')).length;\r\n    }\r\n  }\r\n  return 0;\r\n};\r\n\r\nexport const getCart = () => {\r\n  if (typeof window !== 'undefined') {\r\n    if (localStorage.getItem('cart')) {\r\n      return JSON.parse(localStorage.getItem('cart'));\r\n    }\r\n  }\r\n  return [];\r\n};\r\n\r\nexport const updateItem = (productId, count) => {\r\n  let cart = [];\r\n  if (typeof window !== 'undefined') {\r\n    if (localStorage.getItem('cart')) {\r\n      cart = JSON.parse(localStorage.getItem('cart'));\r\n    }\r\n\r\n    cart.map((product, i) => {\r\n      if (product._id === productId) {\r\n        cart[i].count = count;\r\n      }\r\n    });\r\n\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n  }\r\n};\r\n\r\nexport const removeItem = (productId) => {\r\n  let cart = [];\r\n  if (typeof window !== 'undefined') {\r\n    if (localStorage.getItem('cart')) {\r\n      cart = JSON.parse(localStorage.getItem('cart'));\r\n    }\r\n\r\n    cart.map((product, i) => {\r\n      if (product._id === productId) {\r\n        cart.splice(i, 1);\r\n      }\r\n    });\r\n\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n  }\r\n  return cart;\r\n};\r\n\r\nexport const emptyCart = (next) => {\r\n  if (typeof window !== 'undefined') {\r\n    localStorage.removeItem('cart');\r\n    next();\r\n  }\r\n};\r\n","import React, { Fragment } from 'react';\r\nimport { Link, withRouter, forceUpdate } from 'react-router-dom';\r\nimport { signout, isAuthenticated } from '../auth';\r\nimport { itemTotal } from './cartHelpers';\r\n\r\nimport { fade, makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport MoreIcon from '@material-ui/icons/MoreVert';\r\n\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport Button from '@material-ui/core/Button';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport StorefrontIcon from '@material-ui/icons/Storefront';\r\nimport DashboardIcon from '@material-ui/icons/Dashboard';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport StoreIcon from '@material-ui/icons/Store';\r\n\r\nconst isActive = (history, path) => {\r\n  if (history.location.pathname === path) {\r\n    return { color: '#ff9900', textDecoration: 'none' };\r\n  } else {\r\n    return { color: '#ffffff', textDecoration: 'none' };\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'block',\r\n    },\r\n  },\r\n  search: {\r\n    position: 'relative',\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.white, 0.15),\r\n    '&:hover': {\r\n      backgroundColor: fade(theme.palette.common.white, 0.25),\r\n    },\r\n    marginRight: theme.spacing(2),\r\n    marginLeft: 0,\r\n    width: '100%',\r\n    [theme.breakpoints.up('sm')]: {\r\n      marginLeft: theme.spacing(3),\r\n      width: 'auto',\r\n    },\r\n  },\r\n  searchIcon: {\r\n    padding: theme.spacing(0, 2),\r\n    height: '100%',\r\n    position: 'absolute',\r\n    pointerEvents: 'none',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  inputRoot: {\r\n    color: 'inherit',\r\n  },\r\n  inputInput: {\r\n    padding: theme.spacing(1, 1, 1, 0),\r\n    // vertical padding + font size from searchIcon\r\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n    transition: theme.transitions.create('width'),\r\n    width: '100%',\r\n    [theme.breakpoints.up('md')]: {\r\n      width: '20ch',\r\n    },\r\n  },\r\n  sectionDesktop: {\r\n    display: 'none',\r\n    [theme.breakpoints.up('md')]: {\r\n      display: 'flex',\r\n    },\r\n  },\r\n  sectionMobile: {\r\n    display: 'flex',\r\n    [theme.breakpoints.up('md')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n}));\r\n\r\nconst MaterialAppBar = ({ history }) => {\r\n  const classes = useStyles();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\r\n\r\n  const isMenuOpen = Boolean(anchorEl);\r\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\r\n\r\n  const handleProfileMenuOpen = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMobileMenuClose = () => {\r\n    setMobileMoreAnchorEl(null);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n    handleMobileMenuClose();\r\n  };\r\n\r\n  const handleMobileMenuOpen = (event) => {\r\n    setMobileMoreAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const menuId = 'primary-search-account-menu';\r\n  const renderMenu = (\r\n    <Menu\r\n      anchorEl={anchorEl}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      id={menuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      open={isMenuOpen}\r\n      onClose={handleMenuClose}\r\n    >\r\n      <MenuItem onClick={handleMenuClose}>Profile</MenuItem>\r\n      <MenuItem onClick={handleMenuClose}>My account</MenuItem>\r\n    </Menu>\r\n  );\r\n\r\n  const mobileMenuId = 'primary-search-account-menu-mobile';\r\n  const renderMobileMenu = (\r\n    <Menu\r\n      anchorEl={mobileMoreAnchorEl}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      id={mobileMenuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      open={isMobileMenuOpen}\r\n      onClose={handleMobileMenuClose}\r\n    >\r\n      <div style={{ backgroundColor: '#404040' }}>\r\n        <MenuItem>\r\n          <Link style={isActive(history, '/')} to='/'>\r\n            <IconButton aria-label='Home' color='inherit'>\r\n              <HomeIcon />\r\n            </IconButton>\r\n            Home\r\n          </Link>\r\n        </MenuItem>\r\n\r\n        <MenuItem>\r\n          <Link style={isActive(history, '/shop')} to='/shop'>\r\n            <IconButton aria-label='Shop' color='inherit'>\r\n              <StorefrontIcon />\r\n            </IconButton>\r\n            Shop\r\n          </Link>\r\n        </MenuItem>\r\n\r\n        <MenuItem>\r\n          <Link style={isActive(history, '/cart')} to='/cart'>\r\n            <IconButton aria-label='Cart' color='inherit'>\r\n              <Badge badgeContent={itemTotal()} color='secondary'>\r\n                <ShoppingCartIcon />\r\n              </Badge>\r\n            </IconButton>\r\n            Cart\r\n          </Link>\r\n        </MenuItem>\r\n\r\n        {isAuthenticated() && isAuthenticated().user.role === 0 && (\r\n          <MenuItem>\r\n            <Link\r\n              style={isActive(history, '/user/dashboard')}\r\n              to='/user/dashboard'\r\n            >\r\n              <IconButton aria-label='Dashboard' color='inherit'>\r\n                <DashboardIcon />\r\n              </IconButton>\r\n              Dashboard\r\n            </Link>\r\n          </MenuItem>\r\n        )}\r\n\r\n        {isAuthenticated() && isAuthenticated().user.role === 1 && (\r\n          <MenuItem>\r\n            <Link\r\n              style={isActive(history, '/admin/dashboard')}\r\n              to='/admin/dashboard'\r\n            >\r\n              <IconButton aria-label='Dashboard' color='inherit'>\r\n                <DashboardIcon />\r\n              </IconButton>\r\n              Dashboard\r\n            </Link>\r\n          </MenuItem>\r\n        )}\r\n\r\n        {!isAuthenticated() && (\r\n          <Fragment>\r\n            <MenuItem>\r\n              <Link style={isActive(history, '/signin')} to='/signin'>\r\n                <IconButton aria-label='Signin' color='inherit'>\r\n                  <AccountCircleIcon />\r\n                </IconButton>\r\n                Signin\r\n              </Link>\r\n            </MenuItem>\r\n\r\n            <MenuItem>\r\n              <Link style={isActive(history, '/signup')} to='/signup'>\r\n                <IconButton aria-label='Signup' color='inherit'>\r\n                  <PersonAddIcon />\r\n                </IconButton>\r\n                Signup\r\n              </Link>\r\n            </MenuItem>\r\n          </Fragment>\r\n        )}\r\n\r\n        {isAuthenticated() && (\r\n          <MenuItem>\r\n            <span\r\n              style={{ cursor: 'pointer', color: '#ffffff' }}\r\n              onClick={() =>\r\n                signout(() => {\r\n                  history.push('/');\r\n                })\r\n              }\r\n            >\r\n              <IconButton aria-label='Signout' color='inherit'>\r\n                <ExitToAppIcon />\r\n              </IconButton>\r\n              Signout\r\n            </span>\r\n          </MenuItem>\r\n        )}\r\n      </div>\r\n    </Menu>\r\n  );\r\n\r\n  return (\r\n    <div className={classes.grow}>\r\n      <AppBar position='fixed'>\r\n        <Toolbar>\r\n          <a href='/' style={{ color: '#ffffff' }}>\r\n            <IconButton\r\n              edge='start'\r\n              className={classes.menuButton}\r\n              color='inherit'\r\n              aria-label='brand'\r\n            >\r\n              <StoreIcon />\r\n            </IconButton>\r\n          </a>\r\n          <a href='/' style={{ color: '#ffffff', textDecoration: 'none' }}>\r\n            <Typography className={classes.title} variant='h6' noWrap>\r\n              OLLACART\r\n            </Typography>\r\n          </a>\r\n\r\n          <div className={classes.grow} />\r\n          <div className={classes.sectionDesktop}>\r\n            <Link style={isActive(history, '/')} to='/'>\r\n              <IconButton aria-label='Home' color='inherit'>\r\n                <HomeIcon />\r\n                <Typography noWrap>Home</Typography>\r\n              </IconButton>\r\n            </Link>\r\n\r\n            <Link style={isActive(history, '/shop')} to='/shop'>\r\n              <IconButton aria-label='Shop' color='inherit'>\r\n                <StorefrontIcon />\r\n                <Typography noWrap>Shop</Typography>\r\n              </IconButton>\r\n            </Link>\r\n\r\n            <Link style={isActive(history, '/cart')} to='/cart'>\r\n              <IconButton aria-label='Cart' color='inherit'>\r\n                <Badge badgeContent={itemTotal()} color='secondary'>\r\n                  <ShoppingCartIcon />\r\n                </Badge>\r\n                <Typography noWrap>Cart</Typography>\r\n              </IconButton>\r\n            </Link>\r\n\r\n            {isAuthenticated() && isAuthenticated().user.role === 0 && (\r\n              <Link\r\n                style={isActive(history, '/user/dashboard')}\r\n                to='/user/dashboard'\r\n              >\r\n                <IconButton aria-label='Dashboard' color='inherit'>\r\n                  <DashboardIcon />\r\n                  <Typography noWrap>Dashboard</Typography>\r\n                </IconButton>\r\n              </Link>\r\n            )}\r\n\r\n            {isAuthenticated() && isAuthenticated().user.role === 1 && (\r\n              <Link\r\n                style={isActive(history, '/admin/dashboard')}\r\n                to='/admin/dashboard'\r\n              >\r\n                <IconButton aria-label='Dashboard' color='inherit'>\r\n                  <DashboardIcon />\r\n                  <Typography noWrap>Dashboard</Typography>\r\n                </IconButton>\r\n              </Link>\r\n            )}\r\n\r\n            {!isAuthenticated() && (\r\n              <Fragment>\r\n                <Link style={isActive(history, '/signin')} to='/signin'>\r\n                  <IconButton aria-label='Signin' color='inherit'>\r\n                    <AccountCircleIcon />\r\n                    <Typography noWrap>Signin</Typography>\r\n                  </IconButton>\r\n                </Link>\r\n\r\n                <Link style={isActive(history, '/signup')} to='/signup'>\r\n                  <IconButton aria-label='Signup' color='inherit'>\r\n                    <PersonAddIcon />\r\n                    <Typography noWrap>Signup</Typography>\r\n                  </IconButton>\r\n                </Link>\r\n              </Fragment>\r\n            )}\r\n\r\n            {isAuthenticated() && (\r\n              <span\r\n                style={{ cursor: 'pointer', color: '#ffffff' }}\r\n                onClick={() =>\r\n                  signout(() => {\r\n                    history.push('/');\r\n                  })\r\n                }\r\n              >\r\n                <IconButton aria-label='Signout' color='inherit'>\r\n                  <ExitToAppIcon />\r\n                  <Typography noWrap>Signout</Typography>\r\n                </IconButton>\r\n              </span>\r\n            )}\r\n          </div>\r\n          <div className={classes.sectionMobile}>\r\n            <IconButton\r\n              aria-label='show more'\r\n              aria-controls={mobileMenuId}\r\n              aria-haspopup='true'\r\n              onClick={handleMobileMenuOpen}\r\n              color='inherit'\r\n            >\r\n              <MoreIcon />\r\n            </IconButton>\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n      {renderMobileMenu}\r\n      {renderMenu}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(MaterialAppBar);\r\n","import React from 'react';\r\nimport Menu from './Menu';\r\nimport '../styles.css';\r\n\r\nconst Layout = ({\r\n  title = 'Title',\r\n  description = 'Description',\r\n  className,\r\n  children,\r\n}) => (\r\n  <div className='main-content'>\r\n    <Menu />\r\n    {/* <div className='jumbotron mt-5'>\r\n      <h2>{title}</h2>\r\n      <p className='lead'>{description}</p>\r\n    </div> */}\r\n    <div className={className}>{children}</div>\r\n  </div>\r\n);\r\n\r\nexport default Layout;\r\n","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n// import Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport Copyright from '../core/Copyright';\r\n\r\nimport Layout from '../core/Layout';\r\nimport { signup } from '../auth';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Signup() {\r\n  const [values, setValues] = useState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n    error: '',\r\n    success: false,\r\n  });\r\n\r\n  const { name, email, password, success, error } = values;\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setValues({ ...values, error: false, [name]: event.target.value });\r\n  };\r\n\r\n  const clickSubmit = (event) => {\r\n    event.preventDefault(); // so that browser does not reload\r\n    setValues({ ...values, error: false });\r\n    signup({ name, email, password }).then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error, success: false });\r\n      } else {\r\n        setValues({\r\n          ...values,\r\n          name: '',\r\n          email: '',\r\n          password: '',\r\n          error: '',\r\n          success: true,\r\n        });\r\n      }\r\n    }); // sending js object\r\n  };\r\n\r\n  const showError = () => (\r\n    <div\r\n      className='alert alert-danger'\r\n      style={{ display: error ? '' : 'none' }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n\r\n  const showSuccess = () => (\r\n    <div\r\n      className='alert alert-info'\r\n      style={{ display: success ? '' : 'none' }}\r\n    >\r\n      New account is created. Please <Link to='/signin'>Signin</Link>.\r\n    </div>\r\n  );\r\n\r\n  const classes = useStyles();\r\n\r\n  const signUpForm = () => (\r\n    <Container component='main' maxWidth='xs'>\r\n      {showSuccess()}\r\n      {showError()}\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component='h1' variant='h5'>\r\n          Sign up\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                autoComplete='off'\r\n                onChange={handleChange('name')}\r\n                type='text'\r\n                name='name'\r\n                value={name}\r\n                variant='outlined'\r\n                required\r\n                fullWidth\r\n                id='name'\r\n                label='Full Name'\r\n                autoFocus\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant='outlined'\r\n                required\r\n                fullWidth\r\n                id='email'\r\n                label='Email Address'\r\n                name='email'\r\n                onChange={handleChange('email')}\r\n                type='email'\r\n                value={email}\r\n                autoComplete='off'\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant='outlined'\r\n                required\r\n                fullWidth\r\n                name='password'\r\n                label='Password'\r\n                type='password'\r\n                id='password'\r\n                onChange={handleChange('password')}\r\n                type='password'\r\n                value={password}\r\n                autoComplete='current-password'\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Button\r\n            type='submit'\r\n            fullWidth\r\n            variant='contained'\r\n            color='primary'\r\n            className={classes.submit}\r\n            onClick={clickSubmit}\r\n          >\r\n            Sign Up\r\n          </Button>\r\n          <Grid container justify='flex-end'>\r\n            <Grid item>\r\n              <Link to='/signin' variant='body2'>\r\n                Already have an account? Sign in\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n    </Container>\r\n  );\r\n\r\n  return (\r\n    <Layout\r\n      title='Signup page'\r\n      description='Signup to MERN E-commerce App'\r\n      className='container col-md-8 offset-md-2'\r\n    >\r\n      {signUpForm()}\r\n      <Copyright />\r\n    </Layout>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport Layout from '../core/Layout';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport Copyright from '../core/Copyright';\r\nimport { signin, authenticate, isAuthenticated } from '../auth';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Signin() {\r\n  const [values, setValues] = useState({\r\n    email: '',\r\n    password: '',\r\n    error: '',\r\n    loading: false,\r\n    redirectToReferrer: false,\r\n  });\r\n\r\n  const { email, password, loading, error, redirectToReferrer } = values;\r\n  const { user } = isAuthenticated();\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setValues({ ...values, error: false, [name]: event.target.value });\r\n  };\r\n\r\n  const clickSubmit = (event) => {\r\n    event.preventDefault(); // so that browser does not reload\r\n    setValues({ ...values, error: false, loading: true });\r\n    signin({ email, password }).then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error, loading: false });\r\n      } else {\r\n        authenticate(data, () => {\r\n          setValues({\r\n            ...values,\r\n            redirectToReferrer: true,\r\n          });\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const showError = () => (\r\n    <div\r\n      className='alert alert-danger'\r\n      style={{ display: error ? '' : 'none' }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n\r\n  const showLoading = () =>\r\n    loading && (\r\n      <div className='alert alert-info'>\r\n        <h2>Loading...</h2>\r\n      </div>\r\n    );\r\n\r\n  const redirectUser = () => {\r\n    if (redirectToReferrer) {\r\n      if (user && user.role === 1) {\r\n        return <Redirect to='/admin/dashboard' />;\r\n      } else {\r\n        return <Redirect to='/user/dashboard' />;\r\n      }\r\n    }\r\n    if (isAuthenticated()) {\r\n      return <Redirect to='/' />;\r\n    }\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  const signInForm = () => (\r\n    <Container component='main' maxWidth='xs'>\r\n      {showError()}\r\n      {showLoading()}\r\n      {redirectUser()}\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component='h1' variant='h5'>\r\n          Sign in\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <TextField\r\n            variant='outlined'\r\n            margin='normal'\r\n            required\r\n            fullWidth\r\n            id='email'\r\n            label='Email Address'\r\n            name='email'\r\n            autoComplete='email'\r\n            onChange={handleChange('email')}\r\n            type='email'\r\n            value={email}\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant='outlined'\r\n            margin='normal'\r\n            required\r\n            fullWidth\r\n            name='password'\r\n            label='Password'\r\n            type='password'\r\n            id='password'\r\n            onChange={handleChange('password')}\r\n            type='password'\r\n            value={password}\r\n            autoComplete='current-password'\r\n          />\r\n          <FormControlLabel\r\n            control={<Checkbox value='remember' color='primary' />}\r\n            label='Remember me'\r\n          />\r\n          <Button\r\n            onClick={clickSubmit}\r\n            type='submit'\r\n            fullWidth\r\n            variant='contained'\r\n            color='primary'\r\n            className={classes.submit}\r\n          >\r\n            Sign In\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link href='#' variant='body2'>\r\n                Forgot password?\r\n              </Link>\r\n            </Grid>\r\n            <Grid item>\r\n              <Link to='/signup' variant='body2'>\r\n                {\"Don't have an account? Sign Up\"}\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n    </Container>\r\n  );\r\n\r\n  return (\r\n    <Layout\r\n      title='Signin page'\r\n      description='Signin to MERN E-commerce App'\r\n      className='container col-md-8 offset-md-2'\r\n    >\r\n      {signInForm()}\r\n      <Copyright />\r\n    </Layout>\r\n  );\r\n}\r\n","import { API } from '../config';\r\nimport queryString from 'query-string';\r\n\r\nexport const getProducts = (sortBy) => {\r\n  return fetch(`${API}/products?sortBy=${sortBy}&order=desc&limit=6`, {\r\n    method: 'GET',\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const getCategories = () => {\r\n  return fetch(`${API}/categories`, {\r\n    method: 'GET',\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const getFilteredProducts = (skip, limit, filters = {}) => {\r\n  const data = {\r\n    limit,\r\n    skip,\r\n    filters,\r\n  };\r\n  return fetch(`${API}/products/by/search`, {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(data),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const list = (params) => {\r\n  const query = queryString.stringify(params);\r\n  console.log('query', query);\r\n  return fetch(`${API}/products/search?${query}`, {\r\n    method: 'GET',\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const read = (productId) => {\r\n  return fetch(`${API}/product/${productId}`, {\r\n    method: 'GET',\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const listRelated = (productId) => {\r\n  return fetch(`${API}/products/related/${productId}`, {\r\n    method: 'GET',\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const getBraintreeClientToken = (userId, token) => {\r\n  return fetch(`${API}/braintree/getToken/${userId}`, {\r\n    method: 'GET',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const processPayment = (userId, token, paymentData) => {\r\n  return fetch(`${API}/braintree/payment/${userId}`, {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify(paymentData),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const createOrder = (userId, token, createOrderData) => {\r\n  return fetch(`${API}/order/create/${userId}`, {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify({ order: createOrderData }),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n","import React from 'react';\r\nimport { API } from '../config';\r\n\r\nconst ShowImage = ({ item, url }) => (\r\n  <div className='product-img' >\r\n    <img\r\n      // src={`${API}/${url}/photo/${item._id}`}\r\n      src={item.photo || item.description}\r\n      alt={item.name}\r\n      className='mb-3'\r\n      style={{ objectFit: 'contain', height: '100%', width: '100%', display: 'flex', marginLeft: 'auto', marginRight: 'auto' }}\r\n    />\r\n  </div>\r\n);\r\n\r\nexport default ShowImage;\r\n","import React, { useState } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport ShowImage from './ShowImage';\r\nimport moment from 'moment';\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CameraIcon from '@material-ui/icons/PhotoCamera';\r\nimport CardM from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport Link from '@material-ui/core/Link';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport InsertLinkIcon from '@material-ui/icons/InsertLink'\r\nimport { AddShoppingCart } from '@material-ui/icons';\r\n\r\nimport { addItem, updateItem, removeItem } from './cartHelpers';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  icon: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  heroContent: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    padding: theme.spacing(8, 0, 6),\r\n  },\r\n  heroButtons: {\r\n    marginTop: theme.spacing(4),\r\n  },\r\n  cardGrid: {\r\n    paddingTop: theme.spacing(4),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  card: {\r\n    height: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  cardMedia: {\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  cardContent: {\r\n    flexGrow: 1,\r\n  },\r\n  productDescription: {\r\n    height: '100px',\r\n    'word-break': 'break-all'\r\n  },\r\n  footer: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    padding: theme.spacing(6),\r\n  },\r\n}));\r\n\r\nconst Card = ({\r\n  product,\r\n  showViewProductButton = true,\r\n  showAddToCartButton = true,\r\n  cartUpdate = false,\r\n  showRemoveProductButton = false,\r\n  shopItemClicked,\r\n  setRun = (f) => f, // default value of function\r\n  run = undefined, // default value of undefined\r\n}) => {\r\n  const [redirect, setRedirect] = useState(false);\r\n  const [count, setCount] = useState(product.count);\r\n\r\n  const showViewButton = (showViewProductButton) => {\r\n    return (\r\n      showViewProductButton && (\r\n        <Link href={`/product/${product._id}`} className='mr-2'>\r\n          <Button variant='contained' color='primary'>\r\n            View Product\r\n          </Button>\r\n        </Link>\r\n      )\r\n    );\r\n  };\r\n\r\n  const addToCart = () => {\r\n    // console.log('added');\r\n    addItem(product, setRedirect(true));\r\n  };\r\n\r\n  const shouldRedirect = (redirect) => {\r\n    if (redirect) {\r\n      return <Redirect to='/cart' />;\r\n    }\r\n  };\r\n\r\n  const showAddToCartBtn = (showAddToCartButton) => {\r\n    return (\r\n      showAddToCartButton && (\r\n        <Button onClick={addToCart} variant='outlined' color='secondary'>\r\n          Add to cart\r\n        </Button>\r\n      )\r\n    );\r\n  };\r\n\r\n  const showStock = (quantity) => {\r\n    return quantity > 0 ? (\r\n      <span className='badge badge-primary badge-pill'>In Stock </span>\r\n    ) : (\r\n      <span className='badge badge-primary badge-pill'>Out of Stock </span>\r\n    );\r\n  };\r\n\r\n  const handleChange = (productId) => (event) => {\r\n    setRun(!run); // run useEffect in parent Cart\r\n    setCount(event.target.value < 1 ? 1 : event.target.value);\r\n    if (event.target.value >= 1) {\r\n      updateItem(productId, event.target.value);\r\n    }\r\n  };\r\n\r\n  const showCartUpdateOptions = (cartUpdate) => {\r\n    return (\r\n      cartUpdate && (\r\n        <div className='mt-2'>\r\n          <div className='input-group mb-3'>\r\n            <div className='input-group-prepend'>\r\n              <span className='input-group-text'>Adjust Quantity</span>\r\n            </div>\r\n            <input\r\n              type='number'\r\n              className='form-control'\r\n              value={count}\r\n              onChange={handleChange(product._id)}\r\n            />\r\n          </div>\r\n        </div>\r\n      )\r\n    );\r\n  };\r\n\r\n  const showRemoveButton = (showRemoveProductButton) => {\r\n    return (\r\n      showRemoveProductButton && (\r\n        <Button\r\n          onClick={() => {\r\n            removeItem(product._id);\r\n            setRun(!run); // run useEffect in parent Cart\r\n          }}\r\n          variant='contained'\r\n          color='secondary'\r\n          className={classes.button}\r\n          startIcon={<DeleteIcon />}\r\n        >\r\n          Remove Product\r\n        </Button>\r\n      )\r\n    );\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className=\"card-container\">\r\n      {shouldRedirect(redirect)}\r\n      <ShowImage item={product} url='product' />\r\n      <div className='d-flex justify-content-end align-items-center'>\r\n        <div className='item-name'>{product.name}</div>\r\n        <div className='item-price'>${product.price}</div>\r\n        {/* <div className='item-cart'><ShoppingCartIcon /></div>\r\n        <div className='item-user'><PersonIcon /></div> */}\r\n      </div>\r\n      <a onClick={shopItemClicked} target=\"_blank\" class=\"link left\" >\r\n        <div>\r\n          <AddShoppingCart />\r\n        </div>\r\n      </a>\r\n      <a onClick={e=>e.stopPropagation()} href={product.description || product.photo} target=\"_blank\" class=\"link right\" >\r\n        <div>\r\n          <InsertLinkIcon />\r\n        </div>\r\n      </a>\r\n      {/* <CardContent className={classes.cardContent}>\r\n        <Typography gutterBottom variant='h5' component='h2'>\r\n          {product.name}\r\n        </Typography>\r\n        <Typography className={classes.productDescription}>{product.description.substring(0, 100)}</Typography>\r\n        <p className='black-10'>Price: ${product.price}</p> */}\r\n        {/* <p className='black-9'>\r\n          Category: {product.category && product.category.name}{' '}\r\n        </p>{' '}\r\n        <p className='black-8'>\r\n          Added on {moment(product.createdAt).fromNow()}{' '}\r\n        </p>\r\n        {showStock(product.quantity)}\r\n        <br></br>\r\n        <span>\r\n          {showViewButton(showViewProductButton)}\r\n          {showAddToCartBtn(showAddToCartButton)}\r\n          {showRemoveButton(showRemoveProductButton)}\r\n        </span>\r\n        {showCartUpdateOptions(cartUpdate)} */}\r\n      {/* </CardContent> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nimport { getCategories, list } from './apiCore';\r\nimport Card from './Card';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n  selectEmpty: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  tField: {\r\n    width: 800,\r\n    marginTop: 2,\r\n  },\r\n  root: {\r\n    '& > *': {\r\n      margin: theme.spacing(2),\r\n    },\r\n  },\r\n}));\r\n\r\nconst Search = () => {\r\n  const [data, setData] = useState({\r\n    categories: [],\r\n    category: '',\r\n    search: '',\r\n    results: [],\r\n    searched: false,\r\n  });\r\n\r\n  const { categories, category, search, results, searched } = data;\r\n\r\n  const loadCategories = () => {\r\n    getCategories().then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setData({ ...data, categories: data });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n  }, []);\r\n\r\n  const searchData = () => {\r\n    // console.log(search, category);\r\n    if (search) {\r\n      list({ search: search || undefined, category: category }).then(\r\n        (response) => {\r\n          if (response.error) {\r\n            console.log(response.error);\r\n          } else {\r\n            setData({ ...data, results: response, searched: true });\r\n          }\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  const searchSubmit = (e) => {\r\n    e.preventDefault();\r\n    searchData();\r\n  };\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setData({ ...data, [name]: event.target.value, searched: false });\r\n  };\r\n\r\n  const searchMessage = (searched, results) => {\r\n    if (searched && results.length > 0) {\r\n      return `Found ${results.length} products`;\r\n    }\r\n    if (searched && results.length < 1) {\r\n      return `Search: No products found`;\r\n    }\r\n  };\r\n\r\n  const searchedProducts = (results = []) => {\r\n    return (\r\n      <div className='row'>\r\n        <div className='col-md-1'></div>\r\n        <div className='col-md-10'>\r\n          <h2 className='mt-4 mb-4 text-center'>{searchMessage(searched, results)}</h2>\r\n          <div className='row'>\r\n            {results.map((product, i) => (\r\n              <div className='col-md-4 mb-3'>\r\n                <Card key={i} product={product} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className='col-md-1'></div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  const searchForm = () => (\r\n    <form onSubmit={searchSubmit} className={classes.root}>\r\n      <span className='input-group-text'>\r\n        <div className='input-group input-group-lg'>\r\n          <div className='input-group-prepend'>\r\n            <FormControl className={classes.formControl}>\r\n              <InputLabel id='demo-simple-select-helper-label'>\r\n                Select\r\n              </InputLabel>\r\n              <Select\r\n                labelId='demo-simple-select-placeholder-label-label'\r\n                id='demo-simple-select-placeholder-label'\r\n                value={data.name}\r\n                onChange={handleChange('category')}\r\n                displayEmpty\r\n                className={classes.selectEmpty}\r\n              >\r\n                <MenuItem value='All'>\r\n                  <em>All</em>\r\n                </MenuItem>\r\n                {categories.map((c, i) => (\r\n                  <MenuItem key={i} value={c._id}>\r\n                    {c.name}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n            </FormControl>\r\n          </div>\r\n\r\n          <TextField\r\n            onChange={handleChange('search')}\r\n            id='outlined-basic'\r\n            label={<span><SearchIcon/>Search by name</span>}\r\n            variant='outlined'\r\n            className={classes.tField}\r\n            autoComplete='off'\r\n          />\r\n\r\n          <div className='ml-3 mt-2' style={{ border: 'none' }}>\r\n            <Button ml={2} variant='contained' color='primary' type='submit'>\r\n              Search\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </span>\r\n    </form>\r\n  );\r\n\r\n  return (\r\n    <div className='row'>\r\n      <div className='container mb-3'>{searchForm()}</div>\r\n      <div className='container-fluid mb-3'>{searchedProducts(results)}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from './Layout';\r\nimport { getProducts } from './apiCore';\r\nimport Card from './Card';\r\nimport Search from './Search';\r\nimport 'fontsource-roboto';\r\nimport Copyright from './Copyright';\r\n\r\nconst Home = () => {\r\n  const [productsBySell, setProductsBySell] = useState([]);\r\n  const [productsByArrival, setProductsByArrival] = useState([]);\r\n  const [error, setError] = useState([]);\r\n\r\n  const loadProductsBySell = () => {\r\n    getProducts('sold').then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setProductsBySell(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadProductsByArrival = () => {\r\n    getProducts('createdAt').then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setProductsByArrival(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadProductsByArrival();\r\n    loadProductsBySell();\r\n  }, []);\r\n\r\n  return (\r\n    <Layout\r\n      title='Home page'\r\n      description='MERN E-commerce App'\r\n      className='container-fluid'\r\n    >\r\n      <Search />\r\n      <div className='row'>\r\n        <div className='col-md-1'></div>\r\n        <div className='col-md-10'>\r\n          <h2 className='mb-2'>New Arrivals</h2>\r\n          <div className='row'>\r\n            {productsByArrival.map((product, i) => (\r\n              <div key={i} className='col-xl-4 col-lg-6 col-md-6 col-sm-12'>\r\n                <Card product={product} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <h2 className='mb-2 mt-4'>Best Sellers</h2>\r\n          <div className='row'>\r\n            {productsBySell.map((product, i) => (\r\n              <div key={i} className='col-xl-4 col-lg-6 col-md-6 col-sm-12'>\r\n                <Card product={product} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className='col-md-1'></div>\r\n      </div>\r\n\r\n      <Copyright />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { Component } from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { isAuthenticated } from './index';\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={(props) =>\r\n      isAuthenticated() ? (\r\n        <Component {...props} />\r\n      ) : (\r\n        <Redirect\r\n          to={{\r\n            pathname: '/signin',\r\n            state: { from: props.location },\r\n          }}\r\n        />\r\n      )\r\n    }\r\n  />\r\n);\r\n\r\nexport default PrivateRoute;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\nimport { getPurchaseHistory } from './apiUser';\r\nimport moment from 'moment';\r\n\r\nconst Dashboard = () => {\r\n  const [history, setHistory] = useState([]);\r\n\r\n  const {\r\n    user: { _id, name, email, role },\r\n  } = isAuthenticated();\r\n\r\n  const token = isAuthenticated().token;\r\n\r\n  const init = (userId, token) => {\r\n    getPurchaseHistory(userId, token).then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setHistory(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    init(_id, token);\r\n  }, []);\r\n\r\n  const userLinks = () => {\r\n    return (\r\n      <div className='card'>\r\n        <h4 className='card-header'>User links</h4>\r\n        <ul className='list-group'>\r\n          <li className='list-group-item'>\r\n            <Link className='nav-link' to='/cart'>\r\n              My cart\r\n            </Link>\r\n          </li>\r\n          <li className='list-group-item'>\r\n            <Link className='nav-link' to={`/profile/${_id}`}>\r\n              Update profile\r\n            </Link>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const userInfo = () => {\r\n    return (\r\n      <div className='card mb-5'>\r\n        <h3 className='card-header'>User information</h3>\r\n        <ul className='list-group'>\r\n          <li className='list-group-item'>{name}</li>\r\n          <li className='list-group-item'>{email}</li>\r\n          <li className='list-group-item'>\r\n            {role === 1 ? 'Admin' : 'Registered user'}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const purchaseHistory = (history) => {\r\n    return (\r\n      <div className='card mb-5'>\r\n        <h3 className='card-header'>Purchase history</h3>\r\n        <ul className='list-group'>\r\n          <li className='list-group-item'>\r\n            {history.map((h, i) => {\r\n              return (\r\n                <div>\r\n                  <hr />\r\n                  {h.products.map((p, i) => {\r\n                    return (\r\n                      <div key={i}>\r\n                        <h6>Product name: {p.name}</h6>\r\n                        <h6>Product price: ${p.price}</h6>\r\n                        <h6>Purchased date: {moment(p.createdAt).fromNow()}</h6>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              );\r\n            })}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title='Dashboard'\r\n      description={`${name}`}\r\n      className='container-fluid'\r\n    >\r\n      <div className='row'>\r\n        <div className='col-md-3'>{userLinks()}</div>\r\n        <div className='col-md-9'>\r\n          {userInfo()}\r\n          {purchaseHistory(history)}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","import { API } from '../config';\r\n\r\nexport const read = (userId, token) => {\r\n  return fetch(`${API}/user/${userId}`, {\r\n    method: 'GET',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const update = (userId, token, user) => {\r\n  return fetch(`${API}/user/${userId}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify(user),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const updateUser = (user, next) => {\r\n  if (typeof window !== 'undefined') {\r\n    if (localStorage.getItem('jwt')) {\r\n      let auth = JSON.parse(localStorage.getItem('jwt'));\r\n      auth.user = user;\r\n      localStorage.setItem('jwt', JSON.stringify(auth));\r\n      next();\r\n    }\r\n  }\r\n};\r\n\r\nexport const getPurchaseHistory = (userId, token) => {\r\n  return fetch(`${API}/orders/by/user/${userId}`, {\r\n    method: 'GET',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\n","import React, { Component } from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { isAuthenticated } from './index';\r\n\r\nconst AdminRoute = ({ component: Component, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={(props) =>\r\n      isAuthenticated() && isAuthenticated().user.role === 1 ? (\r\n        <Component {...props} />\r\n      ) : (\r\n        <Redirect\r\n          to={{\r\n            pathname: '/signin',\r\n            state: { from: props.location },\r\n          }}\r\n        />\r\n      )\r\n    }\r\n  />\r\n);\r\n\r\nexport default AdminRoute;\r\n","import React from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst AdminDashboard = () => {\r\n  const {\r\n    user: { _id, name, email, role },\r\n  } = isAuthenticated();\r\n\r\n  const adminLinks = () => {\r\n    return (\r\n      <div className='card'>\r\n        <h4 className='card-header'>Admin Links</h4>\r\n        <ul className='list-group'>\r\n          <li className='list-group-item'>\r\n            <Link className='nav-link' to='/create/category'>\r\n              Create category\r\n            </Link>\r\n          </li>\r\n          <li className='list-group-item'>\r\n            <Link className='nav-link' to='/create/product'>\r\n              Create product\r\n            </Link>\r\n          </li>\r\n          <li className='list-group-item'>\r\n            <Link className='nav-link' to='/admin/orders'>\r\n              View Orders\r\n            </Link>\r\n          </li>\r\n          <li className='list-group-item'>\r\n            <Link className='nav-link' to='/admin/products'>\r\n              Manage Products\r\n            </Link>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const adminInfo = () => {\r\n    return (\r\n      <div className='card mb-5'>\r\n        <h3 className='card-header'>User information</h3>\r\n        <ul className='list-group'>\r\n          <li className='list-group-item'>{name}</li>\r\n          <li className='list-group-item'>{email}</li>\r\n          <li className='list-group-item'>\r\n            {role === 1 ? 'Admin' : 'Registered user'}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title='Dashboard'\r\n      description={`${name}`}\r\n      className='container-fluid'\r\n    >\r\n      <div className='row'>\r\n        <div className='col-md-3'>{adminLinks()}</div>\r\n        <div className='col-md-9'>{adminInfo()}</div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n","import { API } from '../config';\r\n\r\nexport const createCategory = (userId, token, category) => {\r\n  return fetch(`${API}/category/create/${userId}`, {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify(category),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const createProduct = (userId, token, product) => {\r\n  return fetch(`${API}/product/create/${userId}`, {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: product,\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const getCategories = () => {\r\n  return fetch(`${API}/categories`, {\r\n    method: 'GET',\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const listOrders = (userId, token) => {\r\n  return fetch(`${API}/order/list/${userId}`, {\r\n    method: 'GET',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const getStatusValues = (userId, token) => {\r\n  return fetch(`${API}/order/status-values/${userId}`, {\r\n    method: 'GET',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const updateOrderStatus = (userId, token, orderId, status) => {\r\n  return fetch(`${API}/order/${orderId}/status/${userId}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify({ status, orderId }),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\n/**\r\n * to perform crud on product\r\n * get all products\r\n * get a single product\r\n * update single product\r\n * delete single product\r\n */\r\n\r\nexport const getProducts = () => {\r\n  return fetch(`${API}/products?limit=undefined`, {\r\n    method: 'GET',\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const deleteProduct = (productId, userId, token) => {\r\n  return fetch(`${API}/product/${productId}/${userId}`, {\r\n    method: 'DELETE',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const getProduct = (productId) => {\r\n  return fetch(`${API}/product/${productId}`, {\r\n    method: 'GET',\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const updateProduct = (productId, userId, token, product) => {\r\n  return fetch(`${API}/product/${productId}/${userId}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: product,\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n","import React, { useState } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\nimport { createCategory } from './apiAdmin';\r\n\r\nconst AddCategory = () => {\r\n  const [name, setName] = useState('');\r\n  const [error, setError] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  // destructure user and token from localstorage\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const handleChange = (e) => {\r\n    setError('');\r\n    setName(e.target.value);\r\n  };\r\n\r\n  const clickSubmit = (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess(false);\r\n    // make request to api to create category\r\n    createCategory(user._id, token, { name }).then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setError('');\r\n        setSuccess(true);\r\n      }\r\n    });\r\n  };\r\n\r\n  const newCategoryForm = () => (\r\n    <form onSubmit={clickSubmit}>\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Name</label>\r\n        <input\r\n          type='text'\r\n          className='form-control'\r\n          onChange={handleChange}\r\n          value={name}\r\n          autoFocus\r\n          required\r\n        />\r\n      </div>\r\n      <button className='btn btn-outline-primary'>Create Category</button>\r\n    </form>\r\n  );\r\n\r\n  const showSuccess = () => {\r\n    if (success) {\r\n      return <h3 className='text-success'>{name} is created</h3>;\r\n    }\r\n  };\r\n\r\n  const showError = () => {\r\n    if (error) {\r\n      return <h3 className='text-danger'>Category should be unique</h3>;\r\n    }\r\n  };\r\n\r\n  const goBack = () => (\r\n    <div className='mt-5'>\r\n      <Link to='/admin/dashboard' className='text-warning'>\r\n        Back to Dashboard\r\n      </Link>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <Layout\r\n      title='Add a new category'\r\n      description={`Hey ${user.name}, ready to add a new category?`}\r\n    >\r\n      <div className='row'>\r\n        <div className='col-md-8 offset-md-2'>\r\n          {showSuccess()}\r\n          {showError()}\r\n          {newCategoryForm()}\r\n          {goBack()}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AddCategory;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\nimport { createProduct, getCategories } from './apiAdmin';\r\n\r\nconst AddProduct = () => {\r\n  const [values, setValues] = useState({\r\n    name: '',\r\n    description: '',\r\n    price: '',\r\n    categories: [],\r\n    category: '',\r\n    shipping: '',\r\n    quantity: '',\r\n    photo: '',\r\n    loading: false,\r\n    error: '',\r\n    createdProduct: '',\r\n    redirectToProfile: false,\r\n    formData: '',\r\n  });\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const {\r\n    name,\r\n    description,\r\n    price,\r\n    categories,\r\n    category,\r\n    shipping,\r\n    quantity,\r\n    photo,\r\n    loading,\r\n    error,\r\n    createdProduct,\r\n    redirectToProfile,\r\n    formData,\r\n  } = values;\r\n\r\n  // load categories and set form data\r\n  const init = () => {\r\n    getCategories().then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error });\r\n      } else {\r\n        setValues({\r\n          ...values,\r\n          categories: data,\r\n          formData: new FormData(),\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    init();\r\n  }, []);\r\n\r\n  const handleChange = (name) => (event) => {\r\n    const value = name === 'photo' ? event.target.files[0] : event.target.value;\r\n    formData.set(name, value);\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n\r\n  const clickSubmit = (event) => {\r\n    event.preventDefault();\r\n    setValues({ ...values, error: '', loading: true });\r\n\r\n    createProduct(user._id, token, formData).then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error });\r\n      } else {\r\n        setValues({\r\n          ...values,\r\n          name: '',\r\n          description: '',\r\n          photo: '',\r\n          price: '',\r\n          quantity: '',\r\n          loading: false,\r\n          createdProduct: data.name,\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const newPostForm = () => (\r\n    <form className='mb-3' onSubmit={clickSubmit}>\r\n      <h4>Post Photo</h4>\r\n      <div className='form-group'>\r\n        <label className='btn btn-secondary'>\r\n          <input\r\n            onChange={handleChange('photo')}\r\n            type='file'\r\n            name='photo'\r\n            accept='image/*'\r\n          />\r\n        </label>\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Name</label>\r\n        <input\r\n          onChange={handleChange('name')}\r\n          type='text'\r\n          className='form-control'\r\n          value={name}\r\n        />\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Description</label>\r\n        <textarea\r\n          onChange={handleChange('description')}\r\n          className='form-control'\r\n          value={description}\r\n        />\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Price</label>\r\n        <input\r\n          onChange={handleChange('price')}\r\n          type='number'\r\n          className='form-control'\r\n          value={price}\r\n        />\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Category</label>\r\n        <select onChange={handleChange('category')} className='form-control'>\r\n          <option>Please select</option>\r\n          {categories &&\r\n            categories.map((c, i) => (\r\n              <option key={i} value={c._id}>\r\n                {c.name}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Shipping</label>\r\n        <select onChange={handleChange('shipping')} className='form-control'>\r\n          <option>Please select</option>\r\n          <option value='0'>No</option>\r\n          <option value='1'>Yes</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Quantity</label>\r\n        <input\r\n          onChange={handleChange('quantity')}\r\n          type='number'\r\n          className='form-control'\r\n          value={quantity}\r\n        />\r\n      </div>\r\n\r\n      <button className='btn btn-outline-primary'>Create Product</button>\r\n    </form>\r\n  );\r\n\r\n  const showError = () => (\r\n    <div\r\n      className='alert alert-danger'\r\n      style={{ display: error ? '' : 'none' }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n\r\n  const showSuccess = () => (\r\n    <div\r\n      className='alert alert-info'\r\n      style={{ display: createdProduct ? '' : 'none' }}\r\n    >\r\n      <h2>{`${createdProduct}`} is created!</h2>\r\n    </div>\r\n  );\r\n\r\n  const showLoading = () =>\r\n    loading && (\r\n      <div className='alert alert-success'>\r\n        <h2>Loading...</h2>\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <Layout\r\n      title='Add a new product'\r\n      description={`Hey ${user.name}, ready to add a new product?`}\r\n    >\r\n      <div className='row'>\r\n        <div className='col-md-8 offset-md-2'>\r\n          {showLoading()}\r\n          {showSuccess()}\r\n          {showError()}\r\n          {newPostForm()}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AddProduct;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from './Layout';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Link from '@material-ui/core/Link';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport Card from './Card';\r\nimport { getCategories, getFilteredProducts } from './apiCore';\r\nimport Checkbox from './Checkbox';\r\nimport RadioBox from './RadioBox';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport Search from './Search';\r\nimport { prices } from './fixedPrices';\r\nimport Copyright from './Copyright';\r\n\r\nconst Shop = () => {\r\n  const [myFilters, setMyFilters] = useState({\r\n    filters: { category: [], price: [] },\r\n  });\r\n\r\n  const [categories, setCategories] = useState([]);\r\n  const [error, setError] = useState(false);\r\n  const [limit, setLimit] = useState(6);\r\n  const [skip, setSkip] = useState(0);\r\n  const [size, setSize] = useState(0);\r\n  const [filteredResults, setFilteredResults] = useState([]);\r\n\r\n  const init = () => {\r\n    getCategories().then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setCategories(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadFilteredResults = (newFilters) => {\r\n    // console.log(newFilters);\r\n    getFilteredProducts(skip, limit, newFilters).then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setFilteredResults(data.data);\r\n        setSize(data.size);\r\n        setSkip(0);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadMore = () => {\r\n    let toSkip = skip + limit;\r\n    // console.log(newFilters);\r\n    getFilteredProducts(toSkip, limit, myFilters.filters).then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setFilteredResults([...filteredResults, ...data.data]);\r\n        setSize(data.size);\r\n        setSkip(toSkip);\r\n      }\r\n    });\r\n  };\r\n\r\n  const useStyles = makeStyles((theme) => ({\r\n    btn: {\r\n      background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',\r\n      borderRadius: 3,\r\n      border: 0,\r\n      color: 'white',\r\n      height: 48,\r\n      padding: '0 20px',\r\n      boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)',\r\n    },\r\n  }));\r\n\r\n  const classes = useStyles();\r\n\r\n  const loadMoreButton = () => {\r\n    return (\r\n      size > 0 &&\r\n      size >= limit && (\r\n        // <button onClick={loadMore} className='btn btn-warning mb-5'>\r\n        //   Load more\r\n        // </button>\r\n        <Button onClick={loadMore} variant='contained' className={classes.btn}>\r\n          Load more\r\n        </Button>\r\n      )\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    init();\r\n    loadFilteredResults(skip, limit, myFilters.filters);\r\n  }, []);\r\n\r\n  const handleFilters = (filters, filterBy) => {\r\n    // console.log(\"SHOP\", filters, filterBy);\r\n    const newFilters = { ...myFilters };\r\n    newFilters.filters[filterBy] = filters;\r\n\r\n    if (filterBy === 'price') {\r\n      let priceValues = handlePrice(filters);\r\n      newFilters.filters[filterBy] = priceValues;\r\n    }\r\n    loadFilteredResults(myFilters.filters);\r\n    setMyFilters(newFilters);\r\n  };\r\n\r\n  const handlePrice = (value) => {\r\n    const data = prices;\r\n    let array = [];\r\n\r\n    for (let key in data) {\r\n      if (data[key]._id === parseInt(value)) {\r\n        array = data[key].array;\r\n      }\r\n    }\r\n    return array;\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title='Shop page'\r\n      description='Search and find books'\r\n      className='container-fluid'\r\n    >\r\n      {/* <Search /> */}\r\n      <div className='row'>\r\n        {/* <div className='col-md-3'>\r\n          <h4>Filter by categories</h4>\r\n          <ul>\r\n            <Checkbox\r\n              categories={categories}\r\n              handleFilters={(filters) => handleFilters(filters, 'category')}\r\n            />\r\n          </ul>\r\n\r\n          <h4>Filter by price range</h4>\r\n          <div>\r\n            <RadioBox\r\n              prices={prices}\r\n              handleFilters={(filters) => handleFilters(filters, 'price')}\r\n            />\r\n          </div>\r\n        </div> */}\r\n\r\n        <div className='col-md-12'>\r\n          <h2 className='mb-2'>Products</h2>\r\n          <div className='row'>\r\n            {filteredResults.map((product, i) => (\r\n              <div key={i} className='col-xl-4 col-lg-6 col-md-12 col-sm-12'>\r\n                <Card product={product} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <hr />\r\n          {loadMoreButton()}\r\n        </div>\r\n      </div>\r\n      <Copyright />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Shop;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from './Layout';\r\nimport { read, listRelated } from './apiCore';\r\nimport Card from './Card';\r\n\r\nconst Product = (props) => {\r\n  const [product, setProduct] = useState({});\r\n  const [relatedProduct, setRelatedProduct] = useState([]);\r\n  const [error, setError] = useState(false);\r\n\r\n  const loadSingleProduct = (productId) => {\r\n    read(productId).then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setProduct(data);\r\n        // fetch related products\r\n        listRelated(data._id).then((data) => {\r\n          if (data.error) {\r\n            setError(data.error);\r\n          } else {\r\n            setRelatedProduct(data);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const productId = props.match.params.productId;\r\n    loadSingleProduct(productId);\r\n  }, [props]);\r\n\r\n  return (\r\n    <Layout\r\n      title={product && product.name}\r\n      description={\r\n        product && product.description && product.description.substring(0, 100)\r\n      }\r\n      className='container-fluid'\r\n    >\r\n      <div className='row'>\r\n        <div className='col-md-2'></div>\r\n        <div className='col-md-4 col-sm-12'>\r\n          <h4>Product Details</h4>\r\n          {product && product.description && (\r\n            <Card product={product} showViewProductButton={false} />\r\n          )}\r\n        </div>\r\n\r\n        <div className='col-md-4'>\r\n          <h4>Related products</h4>\r\n          {relatedProduct.map((p, i) => (\r\n            <div className='mb-3' key={i}>\r\n              <Card product={p} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className='col-md-2'></div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport {\r\n  getProducts,\r\n  getBraintreeClientToken,\r\n  processPayment,\r\n  createOrder,\r\n} from './apiCore';\r\nimport { emptyCart } from './cartHelpers';\r\nimport Card from './Card';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\nimport DropIn from 'braintree-web-drop-in-react';\r\n\r\nconst Checkout = ({ products, setRun = (f) => f, run = undefined }) => {\r\n  const [data, setData] = useState({\r\n    loading: false,\r\n    success: false,\r\n    clientToken: null,\r\n    error: '',\r\n    instance: {},\r\n    address: '',\r\n  });\r\n\r\n  const userId = isAuthenticated() && isAuthenticated().user._id;\r\n  const token = isAuthenticated() && isAuthenticated().token;\r\n\r\n  const getToken = (userId, token) => {\r\n    getBraintreeClientToken(userId, token).then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n        setData({ ...data, error: data.error });\r\n      } else {\r\n        console.log(data);\r\n        setData({ clientToken: data.clientToken });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getToken(userId, token);\r\n  }, []);\r\n\r\n  const handleAddress = (event) => {\r\n    setData({ ...data, address: event.target.value });\r\n  };\r\n\r\n  const getTotal = () => {\r\n    return products.reduce((currentValue, nextValue) => {\r\n      return currentValue + nextValue.count * nextValue.price;\r\n    }, 0);\r\n  };\r\n\r\n  const showCheckout = () => {\r\n    return isAuthenticated() ? (\r\n      <div>{showDropIn()}</div>\r\n    ) : (\r\n      <Link to='/signin'>\r\n        <Button variant='contained' color='primary'>\r\n          Sign in to checkout\r\n        </Button>\r\n      </Link>\r\n    );\r\n  };\r\n\r\n  let deliveryAddress = data.address;\r\n\r\n  const buy = () => {\r\n    setData({ loading: true });\r\n    // send the nonce to your server\r\n    // nonce = data.instance.requestPaymentMethod()\r\n    let nonce;\r\n    let getNonce = data.instance\r\n      .requestPaymentMethod()\r\n      .then((data) => {\r\n        // console.log(data);\r\n        nonce = data.nonce;\r\n        // once you have nonce (card type, card number) send nonce as 'paymentMethodNonce'\r\n        // and also total to be charged\r\n        // console.log(\r\n        //     \"send nonce and total to process: \",\r\n        //     nonce,\r\n        //     getTotal(products)\r\n        // );\r\n        const paymentData = {\r\n          paymentMethodNonce: nonce,\r\n          amount: getTotal(products),\r\n        };\r\n\r\n        processPayment(userId, token, paymentData)\r\n          .then((response) => {\r\n            console.log(response);\r\n            // empty cart\r\n            // create order\r\n\r\n            const createOrderData = {\r\n              products: products,\r\n              transaction_id: response.transaction.id,\r\n              amount: response.transaction.amount,\r\n              address: deliveryAddress,\r\n            };\r\n\r\n            createOrder(userId, token, createOrderData)\r\n              .then((response) => {\r\n                emptyCart(() => {\r\n                  setRun(!run); // run useEffect in parent Cart\r\n                  console.log('payment success and empty cart');\r\n                  setData({\r\n                    loading: false,\r\n                    success: true,\r\n                  });\r\n                });\r\n              })\r\n              .catch((error) => {\r\n                console.log(error);\r\n                setData({ loading: false });\r\n              });\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n            setData({ loading: false });\r\n          });\r\n      })\r\n      .catch((error) => {\r\n        // console.log(\"dropin error: \", error);\r\n        setData({ ...data, error: error.message });\r\n      });\r\n  };\r\n\r\n  const showDropIn = () => (\r\n    <div onBlur={() => setData({ ...data, error: '' })}>\r\n      {data.clientToken !== null && products.length > 0 ? (\r\n        <div>\r\n          <div className='gorm-group mb-3'>\r\n            <label className='text-muted'>Delivery address:</label>\r\n            <textarea\r\n              onChange={handleAddress}\r\n              className='form-control'\r\n              value={data.address}\r\n              placeholder='Type your delivery address here...'\r\n            />\r\n          </div>\r\n\r\n          <DropIn\r\n            options={{\r\n              authorization: data.clientToken,\r\n              paypal: {\r\n                flow: 'vault',\r\n              },\r\n            }}\r\n            onInstance={(instance) => (data.instance = instance)}\r\n          />\r\n          <button onClick={buy} className='btn btn-success btn-block'>\r\n            Pay\r\n          </button>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n\r\n  const showError = (error) => (\r\n    <div\r\n      className='alert alert-danger'\r\n      style={{ display: error ? '' : 'none' }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n\r\n  const showSuccess = (success) => (\r\n    <div\r\n      className='alert alert-info'\r\n      style={{ display: success ? '' : 'none' }}\r\n    >\r\n      Thanks! Your payment was successful!\r\n    </div>\r\n  );\r\n\r\n  const showLoading = (loading) =>\r\n    loading && <h2 className='text-danger'>Loading...</h2>;\r\n\r\n  return (\r\n    <div>\r\n      <h2>Total: ${getTotal()}</h2>\r\n      {showLoading(data.loading)}\r\n      {showSuccess(data.success)}\r\n      {showError(data.error)}\r\n      {showCheckout()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Layout from './Layout';\r\nimport { getCart } from './cartHelpers';\r\nimport Card from './Card';\r\nimport Checkout from './Checkout';\r\n\r\nimport Copyright from './Copyright';\r\n\r\nconst Cart = () => {\r\n  const [items, setItems] = useState([]);\r\n  const [run, setRun] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setItems(getCart());\r\n  }, [run]);\r\n\r\n  const showItems = (items) => {\r\n    return (\r\n      <div>\r\n        <h2>Your cart has {`${items.length}`} items</h2>\r\n        <hr />\r\n        {items.map((product, i) => (\r\n          <Card\r\n            key={i}\r\n            product={product}\r\n            showAddToCartButton={false}\r\n            cartUpdate={true}\r\n            showRemoveProductButton={true}\r\n            setRun={setRun}\r\n            run={run}\r\n          />\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const noItemsMessage = () => (\r\n    <h2>\r\n      Your cart is empty. <br /> <Link to='/shop'>Continue shopping</Link>\r\n    </h2>\r\n  );\r\n\r\n  return (\r\n    <Layout\r\n      title='Shopping Cart'\r\n      description='Manage your cart items. Add remove checkout or continue shopping.'\r\n      className='container-fluid'\r\n    >\r\n      <div className='row'>\r\n        <div className='col-md-2'></div>\r\n        <div className='col-md-4'>\r\n          {items.length > 0 ? showItems(items) : noItemsMessage()}\r\n        </div>\r\n        <div className='col-md-4'>\r\n          <h2 className='mb-4'>Your cart summary</h2>\r\n          <hr />\r\n          <Checkout products={items} setRun={setRun} run={run} />\r\n        </div>\r\n        <div className='col-md-2'></div>\r\n      </div>\r\n      <Copyright />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\nimport { listOrders, getStatusValues, updateOrderStatus } from './apiAdmin';\r\nimport moment from 'moment';\r\n\r\nconst Orders = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [statusValues, setStatusValues] = useState([]);\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const loadOrders = () => {\r\n    listOrders(user._id, token).then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setOrders(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadStatusValues = () => {\r\n    getStatusValues(user._id, token).then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setStatusValues(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadOrders();\r\n    loadStatusValues();\r\n  }, []);\r\n\r\n  const showOrdersLength = () => {\r\n    if (orders.length > 0) {\r\n      return (\r\n        <h1 className='text-danger display-2'>Total orders: {orders.length}</h1>\r\n      );\r\n    } else {\r\n      return <h1 className='text-danger'>No orders</h1>;\r\n    }\r\n  };\r\n\r\n  const showInput = (key, value) => (\r\n    <div className='input-group mb-2 mr-sm-2'>\r\n      <div className='input-group-prepend'>\r\n        <div className='input-group-text'>{key}</div>\r\n      </div>\r\n      <input type='text' value={value} className='form-control' readOnly />\r\n    </div>\r\n  );\r\n\r\n  const handleStatusChange = (e, orderId) => {\r\n    updateOrderStatus(user._id, token, orderId, e.target.value).then((data) => {\r\n      if (data.error) {\r\n        console.log('Status update failed');\r\n      } else {\r\n        loadOrders();\r\n      }\r\n    });\r\n    // console.log('update order status');\r\n  };\r\n\r\n  const showStatus = (o) => (\r\n    <div className='form-group'>\r\n      <h3 className='mark mb-4'>Status: {o.status}</h3>\r\n      <select\r\n        className='form-control'\r\n        onChange={(e) => handleStatusChange(e, o._id)}\r\n      >\r\n        <option>Update Status</option>\r\n        {statusValues.map((status, index) => (\r\n          <option key={index} value={status}>\r\n            {status}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <Layout\r\n      title='Orders'\r\n      description={`Hey ${user.name}, you can manage all the ordes here`}\r\n    >\r\n      <div className='row'>\r\n        <div className='col-md-8 offset-md-2'>\r\n          {showOrdersLength()}\r\n\r\n          {orders.map((o, oIndex) => {\r\n            return (\r\n              <div\r\n                className='mt-5'\r\n                key={oIndex}\r\n                style={{ borderBottom: '5px solid indigo' }}\r\n              >\r\n                <h2 className='mb-5'>\r\n                  <span className='bg-primary'>Order ID: {o._id}</span>\r\n                </h2>\r\n\r\n                <ul className='list-group mb-2'>\r\n                  <li className='list-group-item'>{showStatus(o)}</li>\r\n                  <li className='list-group-item'>\r\n                    Transaction ID: {o.transaction_id}\r\n                  </li>\r\n                  <li className='list-group-item'>Amount: ${o.amount}</li>\r\n                  <li className='list-group-item'>Ordered by: {o.user.name}</li>\r\n                  <li className='list-group-item'>\r\n                    Ordered on: {moment(o.createdAt).fromNow()}\r\n                  </li>\r\n                  <li className='list-group-item'>\r\n                    Delivery address: {o.address}\r\n                  </li>\r\n                </ul>\r\n\r\n                <h3 className='mt-4 mb-4 font-italic'>\r\n                  Total products in the order: {o.products.length}\r\n                </h3>\r\n\r\n                {o.products.map((p, pIndex) => (\r\n                  <div\r\n                    className='mb-4'\r\n                    key={pIndex}\r\n                    style={{ padding: '20px', border: '1px solid indigo' }}\r\n                  >\r\n                    {showInput('Product name', p.name)}\r\n                    {showInput('Product price', p.price)}\r\n                    {showInput('Product total', p.count)}\r\n                    {showInput('Product Id', p._id)}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { read, update, updateUser } from './apiUser';\r\n\r\nconst Profile = ({ match }) => {\r\n  const [values, setValues] = useState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n    error: false,\r\n    success: false,\r\n  });\r\n\r\n  const { token } = isAuthenticated();\r\n  const { name, email, password, error, success } = values;\r\n\r\n  const init = (userId) => {\r\n    // console.log(userId);\r\n    read(userId, token).then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: true });\r\n      } else {\r\n        setValues({ ...values, name: data.name, email: data.email });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    init(match.params.userId);\r\n  }, []);\r\n\r\n  const handleChange = (name) => (e) => {\r\n    setValues({ ...values, error: false, [name]: e.target.value });\r\n  };\r\n\r\n  const clickSubmit = (e) => {\r\n    e.preventDefault();\r\n    update(match.params.userId, token, { name, email, password }).then(\r\n      (data) => {\r\n        if (data.error) {\r\n          // console.log(data.error);\r\n          alert(data.error);\r\n        } else {\r\n          updateUser(data, () => {\r\n            setValues({\r\n              ...values,\r\n              name: data.name,\r\n              email: data.email,\r\n              success: true,\r\n            });\r\n          });\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  const redirectUser = (success) => {\r\n    if (success) {\r\n      return <Redirect to='/user/dashboard' />;\r\n    }\r\n  };\r\n\r\n  const profileUpdate = (name, email, password) => (\r\n    <form>\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Name</label>\r\n        <input\r\n          type='text'\r\n          onChange={handleChange('name')}\r\n          className='form-control'\r\n          value={name}\r\n        />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Email</label>\r\n        <input\r\n          type='email'\r\n          onChange={handleChange('email')}\r\n          className='form-control'\r\n          value={email}\r\n        />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Password</label>\r\n        <input\r\n          type='password'\r\n          onChange={handleChange('password')}\r\n          className='form-control'\r\n          value={password}\r\n        />\r\n      </div>\r\n\r\n      <button onClick={clickSubmit} className='btn btn-primary'>\r\n        Submit\r\n      </button>\r\n    </form>\r\n  );\r\n\r\n  return (\r\n    <Layout\r\n      title='Profile'\r\n      description='Update your profile'\r\n      className='container-fluid'\r\n    >\r\n      <h2 className='mb-4'>Profile update</h2>\r\n      {profileUpdate(name, email, password)}\r\n      {redirectUser(success)}\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\nimport { getProducts, deleteProduct } from './apiAdmin';\r\n\r\nconst ManageProducts = () => {\r\n  const [products, setProducts] = useState([]);\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const loadProducts = () => {\r\n    getProducts().then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setProducts(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  const destroy = (productId) => {\r\n    deleteProduct(productId, user._id, token).then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        loadProducts();\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadProducts();\r\n  }, []);\r\n\r\n  return (\r\n    <Layout\r\n      title='Manage Products'\r\n      description='Perform CRUD on products'\r\n      className='container-fluid'\r\n    >\r\n      <div className='row'>\r\n        <div className='col-12'>\r\n          <h2 className='text-center'>Total {products.length} products</h2>\r\n          <hr />\r\n          <ul className='list-group'>\r\n            {products.map((p, i) => (\r\n              <li\r\n                key={i}\r\n                className='list-group-item d-flex justify-content-between align-items-center'\r\n              >\r\n                <strong>{p.name}</strong>\r\n                <Link to={`/admin/product/update/${p._id}`}>\r\n                  <span className='badge badge-warning badge-pill'>Update</span>\r\n                </Link>\r\n                <Link>\r\n                  <span\r\n                    onClick={() => destroy(p._id)}\r\n                    className='badge badge-danger badge-pill'\r\n                  >\r\n                    Delete\r\n                  </span>\r\n                </Link>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default ManageProducts;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/Layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { getProduct, getCategories, updateProduct } from './apiAdmin';\r\n\r\nconst UpdateProduct = ({ match }) => {\r\n  const [values, setValues] = useState({\r\n    name: '',\r\n    description: '',\r\n    price: '',\r\n    categories: [],\r\n    category: '',\r\n    shipping: '',\r\n    quantity: '',\r\n    photo: '',\r\n    loading: false,\r\n    error: false,\r\n    createdProduct: '',\r\n    redirectToProfile: false,\r\n    formData: '',\r\n  });\r\n  const [categories, setCategories] = useState([]);\r\n\r\n  const { user, token } = isAuthenticated();\r\n  const {\r\n    name,\r\n    description,\r\n    price,\r\n    // categories,\r\n    category,\r\n    shipping,\r\n    quantity,\r\n    loading,\r\n    error,\r\n    createdProduct,\r\n    redirectToProfile,\r\n    formData,\r\n  } = values;\r\n\r\n  const init = (productId) => {\r\n    getProduct(productId).then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error });\r\n      } else {\r\n        // populate the state\r\n        setValues({\r\n          ...values,\r\n          name: data.name,\r\n          description: data.description,\r\n          price: data.price,\r\n          category: data.category._id,\r\n          shipping: data.shipping,\r\n          quantity: data.quantity,\r\n          formData: new FormData(),\r\n        });\r\n        // load categories\r\n        initCategories();\r\n      }\r\n    });\r\n  };\r\n\r\n  // load categories and set form data\r\n  const initCategories = () => {\r\n    getCategories().then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error });\r\n      } else {\r\n        setCategories(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    init(match.params.productId);\r\n  }, []);\r\n\r\n  const handleChange = (name) => (event) => {\r\n    const value = name === 'photo' ? event.target.files[0] : event.target.value;\r\n    formData.set(name, value);\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n\r\n  const clickSubmit = (event) => {\r\n    event.preventDefault();\r\n    setValues({ ...values, error: '', loading: true });\r\n\r\n    updateProduct(match.params.productId, user._id, token, formData).then(\r\n      (data) => {\r\n        if (data.error) {\r\n          setValues({ ...values, error: data.error });\r\n        } else {\r\n          setValues({\r\n            ...values,\r\n            name: '',\r\n            description: '',\r\n            photo: '',\r\n            price: '',\r\n            quantity: '',\r\n            loading: false,\r\n            error: false,\r\n            redirectToProfile: true,\r\n            createdProduct: data.name,\r\n          });\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  const newPostForm = () => (\r\n    <form className='mb-3' onSubmit={clickSubmit}>\r\n      <h4>Post Photo</h4>\r\n      <div className='form-group'>\r\n        <label className='btn btn-secondary'>\r\n          <input\r\n            onChange={handleChange('photo')}\r\n            type='file'\r\n            name='photo'\r\n            accept='image/*'\r\n          />\r\n        </label>\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Name</label>\r\n        <input\r\n          onChange={handleChange('name')}\r\n          type='text'\r\n          className='form-control'\r\n          value={name}\r\n        />\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Description</label>\r\n        <textarea\r\n          onChange={handleChange('description')}\r\n          className='form-control'\r\n          value={description}\r\n        />\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Price</label>\r\n        <input\r\n          onChange={handleChange('price')}\r\n          type='number'\r\n          className='form-control'\r\n          value={price}\r\n        />\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Category</label>\r\n        <select onChange={handleChange('category')} className='form-control'>\r\n          <option>Please select</option>\r\n          {categories &&\r\n            categories.map((c, i) => (\r\n              <option key={i} value={c._id}>\r\n                {c.name}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Shipping</label>\r\n        <select onChange={handleChange('shipping')} className='form-control'>\r\n          <option>Please select</option>\r\n          <option value='0'>No</option>\r\n          <option value='1'>Yes</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Quantity</label>\r\n        <input\r\n          onChange={handleChange('quantity')}\r\n          type='number'\r\n          className='form-control'\r\n          value={quantity}\r\n        />\r\n      </div>\r\n\r\n      <button className='btn btn-outline-primary'>Update Product</button>\r\n    </form>\r\n  );\r\n\r\n  const showError = () => (\r\n    <div\r\n      className='alert alert-danger'\r\n      style={{ display: error ? '' : 'none' }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n\r\n  const showSuccess = () => (\r\n    <div\r\n      className='alert alert-info'\r\n      style={{ display: createdProduct ? '' : 'none' }}\r\n    >\r\n      <h2>{`${createdProduct}`} is updated!</h2>\r\n    </div>\r\n  );\r\n\r\n  const showLoading = () =>\r\n    loading && (\r\n      <div className='alert alert-success'>\r\n        <h2>Loading...</h2>\r\n      </div>\r\n    );\r\n\r\n  const redirectUser = () => {\r\n    if (redirectToProfile) {\r\n      if (!error) {\r\n        return <Redirect to='/' />;\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title='Add a new product'\r\n      description={`G'day ${user.name}, ready to add a new product?`}\r\n    >\r\n      <div className='row'>\r\n        <div className='col-md-8 offset-md-2'>\r\n          {showLoading()}\r\n          {showSuccess()}\r\n          {showError()}\r\n          {newPostForm()}\r\n          {redirectUser()}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default UpdateProduct;\r\n","import React, { Fragment } from 'react';\r\nimport Layout from './Layout';\r\nimport Copyright from './Copyright';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nconst NotFound = () => {\r\n  return (\r\n    <Layout\r\n      title='Error: 404'\r\n      description='Page Not Found'\r\n      className='container-fluid'\r\n    >\r\n      <Typography variant='h3' gutterBottom>\r\n        <WarningIcon style={{ fontSize: 50, color: '#FF7D00' }} /> Sorry, this page does not\r\n        exist!\r\n      </Typography>\r\n      <Copyright />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import React from 'react';\r\nimport { Group, Person, ShoppingCart, Settings, LocalShipping, AddToHomeScreen, Share } from '@material-ui/icons';\r\nimport Menu from './Menu';\r\n\r\nimport '../styles.css';\r\n\r\nconst MainLayout = ({\r\n  price,\r\n  className,\r\n  children,\r\n  cartSelected,\r\n  cartToggle\r\n}) => {\r\n  const [groupMode, setGrupMode] = React.useState(0)\r\n  return (\r\n    <div className='main-content'>\r\n      <div className='menu'>\r\n        <div className='d-flex justify-content-between'>\r\n          <div className='left-menu'>\r\n            <div className='left-menu-content'>\r\n              <div className={ groupMode ? '' : 'selected' } onClick={() => setGrupMode(0)}>\r\n                <Group />\r\n              </div>\r\n              <div className={ groupMode ? 'selected' : '' } onClick={() => setGrupMode(1)}>\r\n                <Person />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className='right-menu'>\r\n            <div className='menu-item'>\r\n              <Person />\r\n            </div>\r\n            <div className={'menu-item ' + (cartSelected ? 'selected' : '' )} onClick={cartToggle}>\r\n              <ShoppingCart />\r\n            </div>\r\n            <div className='menu-item'>\r\n              <Share />\r\n            </div>\r\n            <div className='menu-item'>\r\n              <Settings />\r\n            </div>\r\n            <div className='menu-item'>\r\n              <LocalShipping />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"d-flex justify-content-end sub-menu\">\r\n          <span class=\"total-price\">$ {price}</span>\r\n          <div className='checkout-btn'>\r\n            <AddToHomeScreen />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className={className}>{children}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MainLayout;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from './MainLayout';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport Card from './Card';\r\nimport { getCategories, getFilteredProducts } from './apiCore';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nimport { prices } from './fixedPrices';\r\n\r\nconst Main = () => {\r\n  const [myFilters, setMyFilters] = useState({\r\n    filters: { category: [], price: [] },\r\n  });\r\n  const [categories, setCategories] = useState([]);\r\n  const [error, setError] = useState(false);\r\n  const [limit, setLimit] = useState(12);\r\n  const [skip, setSkip] = useState(0);\r\n  const [size, setSize] = useState(0);\r\n  const [filteredResults, setFilteredResults] = useState([]);\r\n  const [cartSelected, setCartSelected] = useState(false);\r\n  const [price, setPrice] = useState(0);\r\n\r\n  const init = () => {\r\n    getCategories().then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setCategories(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  const randomizeSelect = (data) => {\r\n    for (let i = 0; i < data.length; i ++) {\r\n      if (Math.random() < 0.5) data[i].selected = true;\r\n    }\r\n  }\r\n\r\n  const loadFilteredResults = (newFilters) => {\r\n    // console.log(newFilters);\r\n    getFilteredProducts(skip, limit, newFilters).then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        randomizeSelect(data.data);\r\n        updateFilterResults(data.data);\r\n        setSize(data.size);\r\n        setSkip(0);\r\n      }\r\n    });\r\n  };\r\n  const loadMore = () => {\r\n    let toSkip = skip + limit;\r\n    // console.log(newFilters);\r\n    getFilteredProducts(toSkip, limit, myFilters.filters).then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        // randomizeSelect(data.data);\r\n        updateFilterResults([...filteredResults, ...data.data]);\r\n        setSize(data.size);\r\n        setSkip(toSkip);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadMoreButton = () => {\r\n    return (\r\n      size > 0 &&\r\n      size >= limit && (\r\n        <Button onClick={loadMore} variant='contained' className='more-btn'>\r\n          more <AddIcon />\r\n        </Button>\r\n      )\r\n    );\r\n  };\r\n  useEffect(() => {\r\n    init();\r\n    loadFilteredResults(skip, limit, myFilters.filters);\r\n  }, []);\r\n\r\n  const handlePrice = (value) => {\r\n    const data = prices;\r\n    let array = [];\r\n\r\n    for (let key in data) {\r\n      if (data[key]._id === parseInt(value)) {\r\n        array = data[key].array;\r\n      }\r\n    }\r\n    return array;\r\n  };\r\n\r\n  const shopItemClicked = (idx) => {\r\n    filteredResults[idx].selected = !filteredResults[idx].selected;\r\n    updateFilterResults([...filteredResults]);\r\n  }\r\n\r\n  const updateFilterResults = (results) => {\r\n    setFilteredResults(results);\r\n    console.log(results)\r\n    const price = results.filter(itm => itm.selected).map(itm => itm.price).reduce((price, itm) => price + itm)\r\n    console.log(price);\r\n    setPrice(price);\r\n  }\r\n\r\n  return (\r\n    <Layout\r\n      title='Shop page'\r\n      description='Search and find books'\r\n      className='container-fluid'\r\n      cartSelected={cartSelected}\r\n      price={price}\r\n      cartToggle={() => setCartSelected(!cartSelected)}\r\n    >\r\n      <div>\r\n        <div className='d-flex flex-wrap justify-content-between'>\r\n          {filteredResults.map((product, i) => (\r\n            (!cartSelected || product.selected) &&\r\n            <div key={i} className={'shop-item ' + (product.selected ? 'selected' : '' )}>\r\n              <Card product={product}  shopItemClicked={() => shopItemClicked(i)}/>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        {loadMoreButton()}\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n  ","import React from 'react';\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\r\nimport Signup from './user/Signup';\r\nimport Signin from './user/Signin';\r\nimport Home from './core/Home';\r\nimport PrivateRoute from './auth/PrivateRoute';\r\nimport Dashboard from './user/UserDashboard';\r\nimport AdminRoute from './auth/AdminRoute';\r\nimport AdminDashboard from './user/AdminDashboard';\r\nimport AddCategory from './admin/AddCategory';\r\nimport AddProduct from './admin/AddProduct';\r\nimport Shop from './core/Shop';\r\nimport Product from './core/Product';\r\nimport Cart from './core/Cart';\r\nimport Orders from './admin/Orders';\r\nimport Profile from './user/Profile';\r\nimport ManageProducts from './admin/ManageProducts';\r\nimport UpdateProduct from './admin/UpdateProduct';\r\nimport NotFound from './core/NotFound';\r\n\r\nimport Main from './core/Main';\r\n\r\nconst Routes = () => {\r\n  return (\r\n    <BrowserRouter>\r\n      <Switch>\r\n        <Route path='/' component={Main} exact />\r\n        <Route path='/home' component={Home} exact />\r\n        <Route path='/shop' component={Shop} exact />\r\n        <Route path='/signin' component={Signin} exact />\r\n        <Route path='/signup' component={Signup} exact />\r\n        <PrivateRoute path='/user/dashboard' component={Dashboard} exact />\r\n        <AdminRoute path='/admin/dashboard' component={AdminDashboard} exact />\r\n        <AdminRoute path='/create/category' component={AddCategory} exact />\r\n        <AdminRoute path='/create/product' component={AddProduct} exact />\r\n        <Route path='/product/:productId' component={Product} exact />\r\n        <Route path='/cart' component={Cart} exact />\r\n        <AdminRoute path='/admin/orders' component={Orders} exact />\r\n        <PrivateRoute path='/profile/:userId' component={Profile} exact />\r\n        <AdminRoute path='/admin/products' component={ManageProducts} exact />\r\n        <AdminRoute\r\n          path='/admin/product/update/:productId'\r\n          component={UpdateProduct}\r\n          exact\r\n        />\r\n        <Route component={NotFound} />\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Routes from './Routes';\r\n\r\nReactDOM.render(<Routes />, document.getElementById('root'));\r\n"],"sourceRoot":""}